<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Quicksand:300,500" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <link rel="stylesheet" href="nav_andFoot.css">
    <link rel="stylesheet" type="text/css" href="css/nav_andFoot.css" />
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <title>Result</title>
    <style>
        body {

            background-image: url("img_ref/result_back.jpg");
            background-repeat: no-repeat;
            background-size: 2100px 1400px;
        }

        .overlay {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            height: 100%;
            width: 100%;
            opacity: 0;
            transition: .5s ease;
            background-color: white;
        }

        .container:hover .overlay {
            opacity: 1;

        }

        /* .container:hover .card-img-top {
            opacity: 0;
        } */

        .card {
            border-radius: 20px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }

        .overlay {
            border-radius: 20px;
        }
        
    </style>
</head>

<body>
    <header>
        <nav class="navbar navbar-expand fixed-top" id="navbar">
          <a class="navbar-brand" href="Home">
            <img
              src="/images/SPP.png"
              alt="logo"
              id="logo"
            />
          </a>
          <ul class="navbar">
            <li class="nav-item">
              <a class="active" href="Home">Home</a>
            </li>
            <li class="nav-item"><a href="search">Hotel booking</a></li>
            <li class="nav-item"><a href="CheckInOut">check in/out</a></li>
            <li class="nav-item"><a href="About">payment</a></li>
            <li id="iconArea">
              <div class="dropdown show">
                <a
                  role="button"
                  id="dropdownMenuLink"
                  data-toggle="dropdown"
                  aria-haspopup="true"
                  aria-expanded="false"
                >
                  <img
                    id="icon"
                    src="/images/user.png"
                    alt="icons"
                /></a>
                <div
                  class="dropdown-menu dropdown-menu-right"
                  aria-labelledby="dropdownMenuLink"
                >
                  <a class="dropdown-item" href="login">Log in</a>
                  <a class="dropdown-item" href="register">Register</a>
                  <a class="dropdown-item" href="#"
                    ><img
                      id="icon"
                      src="/images/carts.png"
                      style="align-content: center"
                      alt="icons"
                  /></a>
                </div>
              </div>
            </li>
          </ul>
        </nav>
      </header>
    <!-- Your codes starts here -->

    <p id="res_cu"
        style="text-align: left; margin-top:10%; margin-left:3%; font-size: 20px;color: rgb(68, 67, 67); background-color: rgb(255, 255, 255); width: 15%; border-radius: 20px; padding: 10px; box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);">
        
    </p>

    <div class="card-deck" style="width: 100%; margin-top:3%; margin-left: 5%; margin-bottom: 5%;">
    </div>

    <!--   -->
    <footer>
        <div class="footer-dark">
            <footer>
                <div class="container">
                    <div class="row">
                        <div class="col-sm-6 col-md-3 item">
                            <h3>Services</h3>
                            <ul>
                                <li><a href="#">Delivery</a></li>
                                <li><a href="#">Payment</a></li>
                                <li><a href="#">Help</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-6 col-md-3 item">
                            <h3>Quick links</h3>
                            <ul>
                                <li><a href="#">Health</a></li>
                                <li><a href="#">Technology</a></li>
                                <li><a href="#">Fashion</a></li>
                                <li><a href="#">Sex toy</a></li>
                                <li><a href="#">Cooking</a></li>

                            </ul>
                        </div>
                        <div class="col-md-6 item text">
                            <h3>Find us</h3>
                            <p>Since 2020, Covid-19 was spreading, ICT mahidol give us the project to build the webpage
                                for
                                doing the online retailer, so our business name as SPP. SPP stand for "Shop prom puarn",
                                inorder
                                to genarate the plattform that customers and their friend can shop and notice each other
                                realtime.</p>
                        </div>

                        <div class="col item social"><a href="https://www.facebook.com/gotofnon"><i
                                    class="icon ion-social-facebook"></i></a><a href="https://twitter.com/eunhazero"><i
                                    class="icon ion-social-twitter"></i></a><a href="https://www.twitch.tv/lolieunha"><i
                                    class="icon ion-social-twitch"></i></a>
                            <a href="https://www.instagram.com/prin_account/"><i
                                    class="icon ion-social-instagram"></i></a>
                        </div>
                    </div>
                    <p class="copyright">SSP Â© 2021</p>
                </div>
            </footer>
        </div>
    </footer>
     <script>
       var User_Id = -1;
       function insert(id){
        
        let person = parseInt(prompt("Please enter your ID", ""));
        User_Id = person;
        var currentdate = new Date(); 
        var datetime =  currentdate.getFullYear() + "-"
                + (currentdate.getMonth()+1)  + "-" 
                + currentdate.getDate()   
                 ;
        
        let Booking_data = {
          booking: {
            Booking_Id: Math.floor(Math.random() * 10000),
            User_Id: User_Id,
            rooms_Id: id,
            BookingDate: datetime,
            
          },
        };
         callProject("/insert","insert",
         Booking_data ).then(
             (data) => {
       
                alert(data.message+"\n"+"Your Booking ID is: "+data.data)
                    
       
             }
            )

      }
     </script>
    <script>

        var temp = window.location.search
        var text = temp.split("=");
        text = text[1];
        // alert(text)

        blank = document.getElementById("res_cu");
        blank.innerText = 'Result :  ' + text
        



        
        //document.getElementById("re").innerText = re

        async function callProduct(url, method, sentData = {}) {
            let data;
            (method == "select")
            let response = await fetch(url, {
                method: 'GET'
            });
            data = await response.json();
            return data
        }
        var check =0;
        callProduct("/result/" + text ).then(
            (data) => {
                
                
                if (data.data.length > 0) {
                    check =1;
                    // alert(data.data.length);
                    let output = '';
                    //output = "<div class= 'card-deck' style='width: 90%; margin-top:3%; margin-left: 5%; margin-bottom: 5%;'>";
                    data.data.forEach((element) => {
                        
                        output += "<div class= 'card-deck' style='width: 25%; margin-top:3%; margin-left: 5%; margin-bottom: 5%;'>"
                        output += "<div class='card'>";
                        output += "<div class='container' style='width:60%; align-self: center; padding-top:20px;''>";
                        output += "<img class='card-img-top' src='" + element.rooms_Image + "'style='width:50% >;";
                        output += "</div>";
                        output += "<div class='card-body'>";
                        output += "<h5 class='card-title text-center'>" + element.rooms_Name + "<p style='font-size: 70%;'>" + element.rooms_Description + "</p></h5>";
                        output += "</div>";
                        output += "<div class='card-footer text-muted mx-auto w-100' style='width: 100%'>";
                        output += "&nbsp; Price :" + element.rooms_Price + "Bath";
                        output += " <button id = "+element.rooms_Id+" type='button' onclick= 'insert(id)' class='btn btn-outline-success float-right'>Book</button>";
                        output += "<button type='button'  class='btn btn-outline-success float-right' style='margin-right: 10px;'><i class='fa fa-plus' style='font-size:15px'></i></button>";
                        output += "</div>";
                        output += "</div>";
                        output += "</div>";
                    });
                    //output += "</div>";
                    let result = document.querySelector(".card-deck");
                    result.innerHTML += output;
                }
                else{
                    let result = document.querySelector(".card-deck");
                    result.innerHTML += "<h1>No Hotel kab Preee</h1>";
                }
            
            }
        );
        async function callProject(url, method, sentData = {}) {
        let data;
        if (method == "selectall") {
          let response = await fetch(url, {
            method: "GET",
          });
          data = await response.json();
        } else if (method == "select") {
          let response = await fetch(url, {
            method: "GET",
          });
          data = await response.json();
        } else if (
          method == "insert" ||
          method == "update" ||
          method == "delete"
        ) {
          let aMethod;
          if (method == "insert") {
            aMethod = "POST";
          } else if (method == "update") {
            aMethod = "PUT";
          } else if (method == "delete") {
            aMethod = "DELETE";
          }
          let response = await fetch(url, {
            method: aMethod,
            headers: {
              Accept: "application/json",
              "Content-Type": "application/json",
            },
            body: JSON.stringify(sentData),
          });
          data = await response.json();
        }
        return data;
      }
      

    </script>
</body>


</html>